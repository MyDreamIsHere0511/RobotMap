<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Robot Map Interface</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      display: flex;
      height: 100vh;
      font-family: sans-serif;
    }
    #control-panel {
      width: 250px;
      display: flex;
      flex-direction: column;
      padding: 10px;
      border-right: 1px solid #ccc;
    }
    #move-controls button,
    #input-controls button {
      margin: 4px;
      padding: 6px 10px;
    }
    #input-controls {
      margin-top: auto;
    }
    #display-area {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
    }
    #map {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    #robot {
      position: absolute;
      top: 100px;
      left: 100px;
      width: 50px;
      transform-origin: center center;
      transition: transform 0.1s linear;
    }
  </style>
</head>
<body>
  <div id="control-panel">
    <div id="move-controls">
      <h4>Di chuyển</h4>
      <button onclick="move(0, -2)">Lên (W)</button>
      <button onclick="move(0, 2)">Xuống (S)</button>
      <button onclick="move(-2, 0)">Trái (A)</button>
      <button onclick="move(2, 0)">Phải (D)</button>
      <button onclick="rotate(-2)">Quay Trái (J)</button>
      <button onclick="rotate(2)">Quay Phải (K)</button>
      <br />
      <label><input type="checkbox" id="toggle-robot" checked onchange="toggleRobot()"> Ẩn/Hiện Robot</label>
    </div>
    <div id="input-controls">
      <h4>Nhập góc quay</h4>
      <input type="number" id="angle-input" placeholder="Nhập góc" />
      <br />
      <button onclick="rotateCustom(-1)">Quay trái</button>
      <button onclick="rotateCustom(1)">Quay phải</button>
    </div>
  </div>
  <div id="display-area">
    <img id="map" src="map.png" alt="Map" />
    <img id="robot" src="robot.png" alt="Robot" />
  </div>

  <script>
    const robot = document.getElementById("robot");
    let x = 100, y = 100, angle = 0;

    function updateRobot() {
      robot.style.left = `${x}px`;
      robot.style.top = `${y}px`;
      robot.style.transform = `rotate(${angle}deg)`;
    }

    function move(dx, dy) {
      x += dx;
      y += dy;
      updateRobot();
    }

    function rotate(da) {
      angle += da;
      updateRobot();
    }

    function rotateCustom(dir) {
      const value = parseFloat(document.getElementById("angle-input").value);
      if (!isNaN(value)) {
        angle += dir * value;
        updateRobot();
      }
    }

    function toggleRobot() {
      robot.style.display = document.getElementById("toggle-robot").checked ? 'block' : 'none';
    }

    // Keyboard controls
    document.addEventListener("keydown", (e) => {
      switch (e.key.toLowerCase()) {
        case 'w': move(0, -1); break;
        case 's': move(0, 1); break;
        case 'a': move(-1, 0); break;
        case 'd': move(1, 0); break;
        case 'j': rotate(-2); break;
        case 'k': rotate(2); break;
      }
    });

    updateRobot();
  </script>
</body>
</html>
